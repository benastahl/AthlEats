<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../static/styles/defaults.css">
    <link rel="stylesheet" href="../static/styles/nav_bar.css">
    <link rel="stylesheet" href="../static/styles/access_forms.css">
    <link rel="stylesheet" href="../static/styles/home.css">
      <link rel="icon" href="../static/images/athleats-logo.png">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> AthlEats Home </title>
   </head>

  <body>
    <section class="home-section">
      <nav>
          <img onclick="location.href = '/'" class="athleats-logo" src="../static/images/athleats-logo.png" alt="athleats-logo">

            {% if not user %}
              <div class="access-buttons-section">
                  <button onclick="show_form('login-form')" id="login-button" class="access-button"> LOGIN </button>
                  <button onclick="show_form('signup-form')" id="signup-button" class="access-button"> SIGNUP </button>
              </div>
          {% else %}
              <div class="profile-details">
                <i class="bx bx-user-circle guest-profile-picture"></i>
                <span class="admin_name">{{user.first_name | capitalize}} {{user.last_name | capitalize }}</span>
                <i class='arrow bx bx-chevron-down' ></i>

              </div>
              <div style="visibility: hidden" class="profile-dropdown">
                      <ul>
                          <li id="profile-selection" onclick="location.href = '/profile'" ><a href="/profile">Profile</a></li>
                          <li onclick="document.location.href = document.location.origin + '/settings'" id="settings-selection">Settings</li>
                          {% if user.staff %}
                              <script>document.querySelector(".profile-dropdown").style.marginTop = "250px";</script>
                              <li onclick="location.href = '/staff-dashboard'" ><a href="/staff-dashboard">Staff Dashboard</a></li>
                          {% endif %}
                          {% if user.admin %}
                              <script>document.querySelector(".profile-dropdown").style.marginTop = "300px";</script>
                              <li onclick="location.href = '/admin-dashboard'" ><a href="/admin-dashboard">Admin Dashboard</a></li>

                          {% endif %}
                          <li onclick="location.href = '/logout'" class="last-option"><a href="/logout">Logout</a></li>
                      </ul>
                </div>

          {% endif %}


      </nav>

      <div class="home-content">
          <div class="home-content-buttons">
              {% if user %}
                  <span class="welcome-message">Welcome, {{ user.first_name | capitalize }}.</span>
                  <form method="get" action="/reserve-calendar?month=">
                      <button class="reserve-pickup-button">
                          <span class="front">
                            reserve pickup
                          </span>
                      </button>
                  </form>
              {% else %}
                  <span id="guest-welcome-message" class="welcome-message">Welcome. Sign up or log in to reserve a pickup.</span>
              {% endif %}
          </div>

          <!-- HIDDEN -->
          <!-- Signup Form -->
          <div style="display: none;" id="signup-form" class="access-form">
            <div class="signup-form form-section">
                <i onclick="hide_form('signup-form')" class='bx bx-x'></i>
                <div class="form-header">
                <h3>AthlEats SIGNUP</h3>
                <p>Please enter details to signup.</p>
              </div>
                <form name="signup" method="post">
                    <label>
                        <input required type="text" name="email" placeholder="email">
                    </label>
                    <label>
                        <input required type="password" name="pass" placeholder="password">
                    </label>
                    <label for="grade"></label><select required class="form-selection" name="grade" id="grade">
                            <option class="form-selection-placeholder" value="" disabled selected>grade</option>
                            <option style="color: #f4f4f4" value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                          </select>
                    <label for="tos"></label><select required class="form-selection" name="tos" id="tos">
                            <option class="form-selection-placeholder" value="" disabled selected>terms of service</option>
                            <option value="agree">agree</option>
                          </select>



                          <p style="display: none;" class="error-occurrence" id="error-occurrence">{{ signup_message }}</p>
                          <button id="submit-form-button" type="submit" value="SIGNUP" onclick="hide_button('submit-form-button')">SIGNUP</button>
                          <p class="message">Already have an account?
                            <a href="/login">Login here</a>
                          </p>
                            <a class="tos-agree-link" target="_blank" rel="noopener noreferrer" href="/terms-of-service">terms of service.</a>

              </form>
            </div>
          </div>
          <!-- Login Form -->
          <div style="display: none;" id="login-form" class="access-form">

              <div class="login-form form-section">
                  <i onclick="hide_form('login-form')" class='bx bx-x'></i>
                  <div class="form-header">
                    <h3>AthlEats LOGIN</h3>
                    <p>Please enter credentials to login.</p>
                </div>

                  <form name="login" method="post">
                      <label>
                          <input required type="text" name="email" placeholder="email">
                      </label>
                      <label>
                          <input required type="password" name="pass" placeholder="password">
                      </label>


                      <p style="display: none;" class="error-occurrence" id="error-occurrence">{{ message }}</p>

                      <button id="submit-form-button" type="submit" value="LOGIN" >LOGIN</button>
                      <p class="message">Not registered?
                        <a href="/login">Create an account</a>
                      </p>

                  </form>
              </div>
          </div>

          <div class="popular-restaurants">
              <h3>Popular Restaurants</h3>
              <div class="restaurant-list">
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">

                      <span class="restaurant-title">
                          Chipotle
                      </span>
                      <span class="restaurant-desc">
                          burritos, bowls, tacos, quesadillas, and salads
                      </span>
                  </div>
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">
                      <span class="restaurant-title">
                          Dunkin Donuts
                      </span>
                      <span class="restaurant-desc">
                          freshly crafted beverages, sandwiches, and snacks served in a variety of delicious flavors
                      </span>
                  </div>
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">
                      <span class="restaurant-title">
                          McDonalds
                      </span>
                      <span class="restaurant-desc">

                      </span>
                  </div>
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">
                      <span class="restaurant-title">
                          Starbucks
                      </span>
                      <span class="restaurant-desc">

                      </span>
                  </div>
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">
                      <span class="restaurant-title">
                          Panera
                      </span>
                      <span class="restaurant-desc">

                      </span>
                  </div>
                  <div class="restaurant-visual">
                      <img src="https://i0.wp.com/sweetlycakes.com/wp-content/uploads/2019/12/Apple-Pie-8blog.jpg?fit=1440%2C2160&ssl=1" alt="">
                      <span class="restaurant-title">
                          Five Guys
                      </span>
                      <span class="restaurant-desc">

                      </span>
                  </div>
              </div>

          </div>

          <div style="display: none;" class="process-visual">
              <div class="process-info-section">
                  <i class='bx bx-store-alt'></i>
                  <span class="process-info">
                      Place an order at your favorite restaurant.
                  </span>
              </div>
              <div class="process-info-section">
                  <i class='bx bx-receipt' ></i>
                  <span class="process-info">
                      Receipt message here
                  </span>
              </div>
              <div class="process-info-section">
                <img src="../static/images/car.png" alt="car">
                <span class="process-info">
                    Driving message here.
                </span>
              </div>
              <div class="process-info-section">
                  <i class='bx bx-bowl-hot' ></i>
                  <span class="process-info">
                      Food message here
                  </span>
              </div>
              <div class="process-info-section">
                  <i class='bx bxs-school' ></i>
                  <span class="process-info">
                      School message here
                  </span>
              </div>

          </div>

      </div>
    </section>
  </body>

  <!-- Popup Forms -->
  <script>
          let hide_form = function (id_name) {
              document.getElementById(id_name).style.display = "none"
              document.querySelector(".home-content-buttons").style.display = "flex"
          }
          let show_form = function (id_name) {
              // BLUR
              let form = document.getElementById(id_name);
              document.querySelector("body").classList.toggle("blurred")
              form.style.filter = "none"

              console.log("Showing form: " + id_name)
              document.querySelector(".home-content-buttons").style.display = "none"
              // Hide all other forms besides id_name form
              let all_form_elements = document.querySelectorAll(".access-form")
              for (let i = 0; i < all_form_elements.length; i++) {
                  let form = all_form_elements[i];
                  if (form.id !== id_name) {
                      form.style.display = "none"
                      continue;
                  }
                  if (form.id === "settings-form")
                      hide_profile_dropdown()
                  form.style.display = "flex";
              }
          }

          // If message return in render_template (flask)
          let message = null;
          if ("{{message_type}}") {
              message = document.querySelector("#{{ message_type }}-form .error-occurrence")
              message.style.display = "block";
              message.innerHTML =  "{{ message }}"
              show_form("{{message_type}}-form")
          }

      </script>

  {% if user %}
    <script src="../static/scripts/profile_dropdown.js"></script>
  {% endif %}

</html>
